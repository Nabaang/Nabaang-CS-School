# 함수 호출 vs 시스템 콜 vs 인터럽트

우선 각 용어의 의미를 알아보자.

### 함수 호출

응용 프로그램에서 사용하는 함수에 대한 호출이다.

### 시스템 콜

운영체제는 커널 모드(Kernel Mode)와 사용자 모드(User Mode)로 나뉘어 구동된다.

-   커널 모드 : 모든 자원(CPU, 메모리, 입출력 장치 드라이버 등)에 접근, 명령 할 수 있다.
-   사용자 모드 : 어플리케이션 코드가 실행되는 모드.

왜 모드를 나눠서 구동하는가? 커널에서 중요한 자원을 관리하기 때문에 보안을 위해서 나눔

사용자 모드에서는 자원에 접근할 수 없다.

응용 프로그램은 OS가 제공하는 인터페이스를 통해서만 자원을 사용할 수 있다.

이러한 인터페이스를 시스템 콜이라 한다.

> 시스템 호출(system call)은 운영 체제의 커널이 제공하는 서비스에 대해, 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스이다. 보통 C나 C++과 같은 고급 언어로 작성된 프로그램들은 직접 시스템 호출을 사용할 수 없기 때문에 고급 API를 통해 시스템 호출에 접근하게 하는 방법이다. - 위키피디아

즉, 우리가 JavaScript로 파일 입출력을 했을 때, 파일 입출력 관련 함수를 호출하였기 때문에 JavaScript에서 파일에 접근해서 읽고 쓴다고 생각할 수 있지만, 그 내부에는 시스템 콜을 호출하는 과정이 숨겨져 있는 것이다.

**시스템 콜의 종류**

-   프로세스 컨트롤 (생성, 종료, 메모리 할당 등)
-   파일 관리 (생성, 삭제, 열기, 닫기, 읽기 등)
-   디바이스 관리
-   정보 관리
-   통신
-   보안

### 인터럽트

인터럽트를 직역하면 ‘방해하다’를 의미한다. 즉, CPU의 정상적인 프로그램 실행을 방해하는 행동을 인터럽트라고 한다.

CPU가 프로그램을 실행하고 있을 때, 입출력 장치나 예외상황이 발생하여 처리가 필요한 경우 CPU에게 알려져 처리할 수 있도록 하는 것.

CPU는 명령어를 실행할 때마다 인터럽트 요청이 있는지 매번 확인한다.

이때 인터럽트 요청을 확인하는 방식에는 폴링과 인터럽트가 있다.

폴링은 CPU가 주기적으로 주변장치를 감시하여 특정 상황이 발생하면 해당처리 루틴을 실행한다면, 인터럽트는 주변장치에서 CPU에 일을 처리해달라고 알려준다는 점(정확히는 인터럽트 라인에 인터럽트가 발생했다는 것을 세팅함)이 다르다. (이벤트 처리 방식과 유사하다고 생각함)

폴링 방식을 CPU가 주기적으로 주변장치를 확인하기 때문에 자원이 낭비되는 문제가 있어서 인터럽트 방식을 많이 사용한다고 함.

**종류**

-   하드웨어 인터럽트 : 입출력 발생
-   소프트웨어 인터럽트 : 예외 상황, system call

**처리절차**

1. 인터럽트 요청 & 승인
2. 프로그램 실행 중단
3. 현재의 프로그램 상태 보존(PCB, PC 등)
4. 인터럽트 처리루틴 실행 : 인터럽트를 요청한 장치를 식별함.
5. 인터럽트 서비스 루틴 실행
    - 인터럽트 원인을 파악하고 알맞은 작업을 수행한다.
    - 각 원인에 맞게 처리하는 루틴이 정해져 있는데 이를 인터럽트 서비스 루틴이라고 함.
    - 인터럽트 서비스 루틴은 인터럽트 벡터라는 자료구조에 명시되어 있다.
    - 루틴 수행 중 우선순위가 더 높은 인터럽트가 발생하면 재귀적으로 1~5를 수행한다.
6. 상태복구 : 인터럽트 발생 시 저장해둔 상태를 복구한다.
7. 중단된 프로그램 실행 재개

### 함수 호출 vs 시스템 콜

둘 다 사용자 모드에서 호출되지만,

함수 호출은 사용자 모드에서만 동작하는 반면,

시스템 콜은 커널 모드로 변환되어 동작한다.

### 함수 호출 vs 시스템 콜 vs 인터럽트

물론 호출의 대상이 다르긴 하다. 함수 호출과 시스템 콜은 사용자(개발자)에 의해 호출되지만, 인터럽트는 직접 호출되기도 하지만 함수를 처리하는 과정에서 에러가 발생하거나 시스템 콜이 호출되었을 때 호출된다.

인터럽트는 함수를 처리하는 과정에서 에러가 발생하거나 시스템 콜을 호출했을 때 발생하는 개념으로 셋을 비교하기 보다는 연관된 개념으로 보는게 맞아 보인다.

---

### 출처

[https://fjvbn2003.tistory.com/306](https://fjvbn2003.tistory.com/306)
[https://whatisthenext.tistory.com/147](https://whatisthenext.tistory.com/147)
